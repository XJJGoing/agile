{"version":3,"sources":["webpack:///F:/个人信息/agile/App.vue?f4c3","webpack:///F:/个人信息/agile/App.vue?d04e","webpack:///F:/个人信息/agile/App.vue?e90d","webpack:///F:/个人信息/agile/App.vue","webpack:///F:/个人信息/agile/App.vue?b5d0"],"names":["query","require","Query","enterSprint","projectId","uni","request","url","sprintQuery","method","data","pageNum","pageSize","dataType","then","allSprint","records","console","log","sprintId","length","nowDateTime","Date","i","startTime","endTime","jude","id","setStorage","key","len","success","catch","Error","showToast","title","duration","icon","_this","userInfo","onShow","getStorage","res1","findUser","isRoot","switchTab","res2","roleId","findUserProjectRole","removeStorage","redirectTo","fail","onLaunch","onHide","res","nowInProject","error","methods"],"mappings":"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","file":"common/main.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\谷歌下载内容保存地\\\\HbuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('2969f12a', component.options)\n    } else {\n      api.reload('2969f12a', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"个人信息/agile/App.vue\"\nexport default component.exports","import mod from \"-!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","import mod from \"-!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"","\n    const query = require('./static/utils/utils').Query;\n\tconst Query = new query();\n\t\n\timport {sprintQuery} from './static/utils/api.js';\n\timport {formatDate} from './static/utils/time.js';\n\timport {compareTime} from'./static/utils/utils';\n\t\n\t//一进入项目就设置进入本项目的相应的时间段内的冲刺(先查询然后进行时间的比对)\n\tconst enterSprint = (projectId) =>{\n\t\t\t  \tif(projectId){\n\t\t\t  \t \tuni.request({\n\t\t\t  \t \turl:sprintQuery, \n\t\t\t  \t \tmethod:\"POST\",\n\t\t\t  \t \tdata:{\n\t\t\t  \t \t\tprojectId:projectId,\n\t\t\t\t\t\tpageNum:0,\n\t\t\t\t\t\tpageSize:1000\n\t\t\t  \t \t},\n\t\t\t  \t \tdataType:'json',\n\t\t\t  \t })\n\t\t\t  \t .then(data=>{\n\t\t\t  \t \tlet allSprint = data[1].data.data.records;\n\t\t\t\t\tconsole.log(allSprint)\n\t\t\t  \t\tlet sprintId = \"\";\n\t\t\t  \t \tif(allSprint.length){\n\t\t\t  \t\t  //获取当前的时间并且进行时间转换用作比较\n\t\t\t  \t\t  let nowDateTime = formatDate(new Date());\n\t\t\t  \t\t  for(let i = 0;i<allSprint.length;i++){\n\t\t\t  \t\t    \tcompareTime(allSprint[i].startTime,allSprint[i].endTime,nowDateTime,(jude)=>{\n\t\t\t\t\t\t\t\tif(jude){\n\t\t\t\t\t\t\t\t\tsprintId = allSprint[i].id;\n\t\t\t\t\t\t\t\t\tconsole.log(\"设置了冲刺\",sprintId);\n\t\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\t\tkey:'sprintId', \n\t\t\t\t\t\t\t\t\t\tdata:sprintId,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t  \t\t  } \n\t\t\t  \t\t  if(sprintId===\"\"){           //如果实在都超过了时间段就默认进入最后一个\n\t\t\t  \t\t\t   let len = allSprint.length-1;\n\t\t\t  \t\t\t   sprintId = allSprint[len].id;\n\t\t\t\t\t\t   uni.setStorage({\n\t\t\t\t\t\t   \tkey:'sprintId', \n\t\t\t\t\t\t   \tdata:sprintId,\n\t\t\t\t\t\t   \tsuccess:()=>{\n\t\t\t\t\t\t   \t\tconsole.log(\"设置冲刺成功\",sprintId);\n\t\t\t\t\t\t   \t}\n\t\t\t\t\t\t   })\n\t\t\t  \t\t  } \n\t\t\t  \t \t}else{ \n\t\t\t  \t\t\tuni.setStorage({\n\t\t\t  \t\t\t\tkey:'sprintId',\n\t\t\t  \t\t\t\tdata:\"\",\n\t\t\t  \t\t\t})\n\t\t\t  \t\t}\n\t\t\t  \t })\n\t\t\t  \t .catch(Error=>{\n\t\t\t  \t \tuni.showToast({\n\t\t\t  \t \t\ttitle:\"网络错误\",\n\t\t\t  \t \t\tduration:1000,\n\t\t\t  \t \t\ticon:\"loading\"\n\t\t\t  \t \t})\n\t\t\t  \t })\t\n\t\t\t }\n\t   } \n\t\n\tvar _this;\n\texport default {\n\t\tdata () {\n\t\t\treturn {\n\t\t\t\tuserInfo:{},       //用户的信息\n\t\t\t\tprojectId:\"\"        //项目的id\n\t\t\t}\n\t\t},\n\t\tonShow: function() {\n\t\t\t_this = this;\n\t\t\tconsole.log(\"启动微信小程序\")\n\t\t\t\n\t\t\t//当微信小程序一启动的时候就去判断用户有没有登录,如果为超级用户就直接跳转people页面进行项目的审核\n\t\t\t //当微信小程序一启动的时候，就去storage中判断有没有nowInproject,\n\t\t\t//而且判断里面roleid为3的时候，再去数据库中查找进而确定还能不能够访问。\n\t\t\t//如果有项目和冲刺就进入时间段内sprintId\n\t\t\t\n\t\t\tuni.getStorage({\n\t\t\t\tkey:'userInfo', \n\t\t\t\tsuccess:(res1)=>{\n\t\t\t\t\tlet id = {\n\t\t\t\t\t\tid:res1.data.id\n\t\t\t\t\t}\n\t\t\t\t    Query.findUser(id)\n \t\t\t\t\t.then(data=>{\n\t\t\t\t\t\tconsole.log(\"启动信息\",data.data.records[0])\n                        if(data.data.records[0].isRoot){\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl:'/pages/people/people'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t_this.userInfo = data.data.records[0]\n\t\t\t\t\t\t     uni.getStorage({\n\t\t\t\t\t\t    \tkey:'nowInProject',\n\t\t\t\t\t\t\t\tsuccess:(res2)=>{\n\t\t\t\t\t\t\t\t\t\tif(res2.data.roleId===3)\n\t\t\t\t\t\t\t\t\t\t{     //不用判断等于四,这种设计不存在等于4权限的情况\n\t\t\t\t\t\t\t\t\t\t Query.findUserProjectRole(_this.userInfo.id,res2.data.projectId)\n\t\t\t\t\t\t\t\t\t\t .then(data=>{\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"获取到的用户的最新的权限\",data.data.records)\n\t\t\t\t\t\t\t\t\t\t\tif(!data.data.records.length){\n\t\t\t\t\t\t\t\t\t\t\t\t uni.removeStorage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t key:\"nowInPorject\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t success:()=>{ \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t console.log(\"权限改变移除nowInProject\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t uni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '/pages/apply/apply',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t }); \n\t\t\t\t\t\t\t\t\t\t\t\t\t }\n\t\t\t\t\t\t\t\t\t\t\t\t })\n\t\t\t\t\t\t\t\t\t\t\t}else{ \n\t\t\t\t\t\t\t\t\t\t\t\t  uni.setStorage({\n\t\t\t\t\t\t\t\t\t\t\t\t  key:'nowInProject',\n\t\t\t\t\t\t\t\t\t\t\t\t  data:data.data.records[0],\n\t\t\t\t\t\t\t\t\t\t\t\t  success:()=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t //设置projectId并且进入冲刺\n\t\t\t\t\t\t                            _this.projectId = data.data.records[0].projectId;\n\t\t\t\t\t\t\t\t\t\t\t\t\tenterSprint(_this.projectId);  \n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl:'/pages/index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t }\n\t\t\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t //设置projectId并且进入冲刺\n\t\t\t\t\t\t\t\t\t_this.projectId = res2.data.projectId;\n\t\t\t\t\t\t\t\t\tenterSprint(_this.projectId); \n\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\turl:'/pages/index/index'\n\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t        }, \n\t\t\t\t\t\t\tfail:()=>{  //没有直接跳\n\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\turl:'/pages/apply/apply'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t     })\t\n\t\t\t\t\t\t} \t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t\t.catch(Error=>{\n\t\t\t\t\t\t   uni.showToast({\n\t\t\t\t\t\t\ttitle:\"网络错误\",\n\t\t\t\t\t\t\tduration:1000,\n\t\t\t\t\t\t\ticon:\"loading\"\n\t\t\t\t\t\t   })\n\t\t\t\t\t  })\n\t\t\t\t\t},\n\t\t\t\t   \tfail:()=>{\n\t\t\t\t   \t\t\tuni.redirectTo({\n\t\t\t\t   \t\t\t\turl:'/pages/login/login'\n\t\t\t\t   \t\t\t})\n\t\t\t\t   \t\t}\n\t\t\t\t   \t})\n\t\t },\n\t\t\t\n\t    onLaunch:function(){\n\t\t\t\n\t\t},\n\t\t\n\t\t//退出该小程序的时候再次进行权限的判断，将信息保存到nowInProject 中,应付1权限用户将2权限用户改成3、4权限\n\t\tonHide: function() {\n\t\t\t//下面这个为正确的代码\n\t\t\t_this = this;\n\t\t\tuni.getStorage({\n\t\t\t\tkey:\"nowInProject\",\n\t\t\t\tsuccess:(res)=>{\n\t\t\t\t  Query.findUserProjectRole(_this.userInfo.id,res.data.projectId)\n\t\t\t\t  .then(data=>{\n\t\t\t\t\t  if(data.data.records[0].roleId===4){  //为4直接清空\n\t\t\t\t\t\t  uni.removeStorage({\n\t\t\t\t\t\t  \tkey:nowInProject,\n\t\t\t\t\t\t    success:()=>{\n\t\t\t\t\t\t\t\tconsole.log(\"权限改变成4清空nowInProject\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  })\n\t\t\t\t\t  }else{  //不为4再次进行保存\n\t\t\t\t\t\t uni.setStorage({\n\t\t\t\t\t\t \tkey:'nowInProject',\n\t\t\t\t\t\t\tdata:data.data.records[0],\n\t\t\t\t\t\t\tsuccess:()=>{\n\t\t\t\t\t\t\t\tconsole.log(\"更新nowInProject成功,小程序退到后台\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t })\n\t\t\t\t\t  }\n\t\t\t\t  })\n\t\t\t\t  .catch(error=>{\n\t\t\t\t\t  console.log(\"退出时网络错误\")\n\t\t\t\t  })\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\tmethods:{\n\t\t   \n\t\t}\n\t\t\t\n\t}\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}