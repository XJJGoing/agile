{"version":3,"sources":["webpack:///F:/个人信息/agile/App.vue?7c3e","webpack:///F:/个人信息/agile/App.vue?1367","webpack:///F:/个人信息/agile/App.vue?862e","webpack:///F:/个人信息/agile/App.vue","webpack:///F:/个人信息/agile/App.vue?8ac3"],"names":["query","require","Query","_this","data","userInfo","onLaunch","console","log","uni","getStorage","key","success","res","roleId","findUserProjectRole","userId","projectId","then","removeStorage","setStorage","records","redirectTo","url","fail","onShow","onHide","id","nowInProject","catch","error"],"mappings":"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","file":"common/main.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\谷歌下载内容保存地\\\\HbuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('2969f12a', component.options)\n    } else {\n      api.reload('2969f12a', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"个人信息/agile/App.vue\"\nexport default component.exports","import mod from \"-!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import mod from \"-!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../谷歌下载内容保存地/HbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","\nconst query = require('./static/utils/utils').Query;\nconst Query = new query();\nvar _this;\nexport default {\n\tdata () {\n\t\treturn {\n\t\t\tuserInfo:{},       //用户的信息\n\t\t}\n\t},\n\tonLaunch: function() {\n\t\t_this = this;\n\t\tconsole.log(\"启动微信小程序\")\n\t\t//当微信小程序一启动的时候就去判断用户有没有登录\n\t\tuni.getStorage({\n\t\t\tkey:'userInfo', \n\t\t\tsuccess:(res)=>{\n\t\t\t\t //当微信小程序一启动的时候，就去storage中判断有没有nowInproject,\n\t\t\t\t //而且判断里面roleid为3的时候，再去数据库中查找进而确定还能不能够访问。\n\t\t\t\t _this.userInfo = res.data;\t\n\t\t\t\t    if(res.data.roleId===3)\n\t\t\t\t    {     //不用判断等于四,这种设计不存在等于4权限的情况\n\t\t\t\t\t\t\tQuery.findUserProjectRole(res.data.userId,res.data.projectId)\n\t\t\t\t\t\t\t.then(data=>{\n\t\t\t\t\t\t\t\tif(data.data.roleId===4){\n\t\t\t\t\t\t\t\t\t uni.removeStorage({\n\t\t\t\t\t\t\t\t\t\t key:\"nowInPorject\",\n\t\t\t\t\t\t\t\t\t\t success:()=>{\n\t\t\t\t\t\t\t\t\t\t\t console.log(\"权限改变移出nowInProject\")\n\t\t\t\t\t\t\t\t\t\t }\n\t\t\t\t\t\t\t\t\t })\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t      uni.setStorage({\n\t\t\t\t\t\t\t\t\t  key:'nowInProject',\n\t\t\t\t\t\t\t\t\t  data:data.data.records[0],\n\t\t\t\t\t\t\t\t\t  success:()=>{\n\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\turl:'/pages/index/index'\n\t\t\t\t\t\t\t\t        })\n\t\t\t\t\t\t\t         }\n\t\t\t\t\t\t          })\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t    })\t\t\n\t\t\t   \t\t }\n\t\t\t\t\t else{\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\turl:'/pages/index/index'\n\t\t\t\t\t\t})\n\t\t\t\t\t  }\n\t\t\t\t\t},\n\t\t\t   \t\tfail:()=>{\n\t\t\t   \t\t\tuni.redirectTo({\n\t\t\t   \t\t\t\turl:'/pages/login/login'\n\t\t\t   \t\t\t})\n\t\t\t   \t\t}\n\t\t\t   \t})\n\t},\n\t\t\n\tonShow: function() {\n\t\tconsole.log('App Show')\n\t},\n\t\n\t//退出该小程序的时候再次进行权限的判断，将信息保存到nowInProject 中,应付1权限用户将2权限用户改成3、4权限\n\tonHide: function() {\n\t\t//下面这个为正确的代码\n\t\t_this = this;\n\t\tuni.getStorage({\n\t\t\tkey:\"nowInProject\",\n\t\t\tsuccess:(res)=>{\n\t\t\t  Query.findUserProjectRole(_this.userInfo.id,res.data.projectId)\n\t\t\t  .then(data=>{\n\t\t\t\t  if(data.data.records[0].roleId===4){  //为4直接清空\n\t\t\t\t\t  uni.removeStorage({\n\t\t\t\t\t  \tkey:nowInProject,\n\t\t\t\t\t    success:()=>{\n\t\t\t\t\t\t\tconsole.log(\"权限改变成4清空nowInProject\")\n\t\t\t\t\t\t}\n\t\t\t\t\t  })\n\t\t\t\t  }else{  //不为4再次进行保存\n\t\t\t\t\t uni.setStorage({\n\t\t\t\t\t \tkey:'nowInProject',\n\t\t\t\t\t\tdata:data.data.records[0],\n\t\t\t\t\t\tsuccess:()=>{\n\t\t\t\t\t\t\tconsole.log(\"更新nowInProject成功,小程序退到后台\")\n\t\t\t\t\t\t}\n\t\t\t\t\t })\n\t\t\t\t  }\n\t\t\t  })\n\t\t\t  .catch(error=>{\n\t\t\t\t  console.log(\"退出时网络错误\")\n\t\t\t  })\n\t\t\t}\n\t\t})\n\t},\n\t\n}\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}